plugins {
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.1.0'
    id 'org.panteleyev.jpackageplugin' version '1.5.0'
}

group = 'org.breachinthecontainment'

mainClassName = 'org.breachinthecontainment.launcher_client.Main'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.json:json:20230227'
}

javafx {
    version = "21" // Or 21 if using JDK 21
    modules = ['javafx.controls', 'javafx.graphics']
}

application {
    mainClass = mainClassName
}

jar {
    manifest {
        attributes 'Main-Class': mainClassName
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

jpackage {
//    imageName = "LauncherClient"
    appName = "BreachInTheContainmentLauncher"
    appVersion = "1.0.0"
    vendor = "BREACHINTHECONTAINMENT"
    input = "build/libs"
    destination = "build/jpackage"
    javaOptions = ["-Xmx1G"]
    mainJar = "launcher_client.jar"
    mainClass = "org.breachinthecontainment.launcher_client.Main"
}

tasks.jpackage.dependsOn tasks.jar
